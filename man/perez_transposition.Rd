% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/perez_transposition.R
\name{perez_transposition}
\alias{perez_transposition}
\title{Perez (1990) Anisotropic Transposition Model}
\usage{
perez_transposition(
  time,
  lat,
  lon,
  GHI,
  DNI,
  DHI,
  tilt,
  azimuth,
  albedo = 0.2,
  solar_constant = 1366.1
)
}
\arguments{
\item{time}{POSIXct vector of times (UTC recommended)}

\item{lat}{Latitude in degrees}

\item{lon}{Longitude in degrees}

\item{GHI}{Global horizontal irradiance (W/m^2)}

\item{DNI}{Direct normal irradiance (W/m^2)}

\item{DHI}{Diffuse horizontal irradiance (W/m^2)}

\item{tilt}{Panel tilt angle (degrees from horizontal)}

\item{azimuth}{Panel azimuth (degrees, 0 = north)}

\item{albedo}{Ground albedo (default 0.2)}

\item{solar_constant}{The solar constant (W/m^2). Default: 1366.1}
}
\value{
Data frame with columns:
\describe{
\item{time}{Input timestamps}
\item{GHI}{Input global horizontal irradiance (W/m^2)}
\item{DNI}{Input direct normal irradiance (W/m^2)}
\item{DHI}{Input diffuse horizontal irradiance (W/m^2)}
\item{poa_global}{Total plane-of-array irradiance (W/m^2)}
\item{poa_beam}{Beam (direct) component on tilted surface (W/m^2)}
\item{poa_sky_diffuse}{Sky diffuse component on tilted surface (W/m^2)}
\item{poa_ground_diffuse}{Ground reflected component on tilted surface (W/m^2)}
\item{poa_diffuse}{Total diffuse (sky + ground) on tilted surface (W/m^2)}
\item{zenith}{Solar zenith angle (degrees)}
\item{azimuth}{Solar azimuth angle (degrees)}
\item{incidence}{Angle of incidence on panel (degrees)}
\item{epsilon}{Sky clearness parameter}
\item{delta}{Sky brightness parameter}
\item{ebin}{Epsilon bin index (1-8)}
\item{F1}{Brightness coefficient F1}
\item{F2}{Brightness coefficient F2}
}
}
\description{
Convert horizontal irradiance to plane-of-array (POA) irradiance using the
Perez et al. (1990) anisotropic sky model with the 'allsitescomposite1990'
coefficient set.

The Perez model determines the total POA irradiance by combining:
\itemize{
\item Beam component: Direct normal irradiance projected onto the tilted surface
\item Sky diffuse component: Anisotropic model with circumsolar, isotropic, and horizon brightening parts
\item Ground diffuse component: Isotropic reflection from the ground
}

The sky diffuse irradiance is calculated as:
\deqn{I_{d} = DHI [(1 - F_1) (1 + \\cos\\beta)/2 + F_1 A/B + F_2 \\sin\\beta]}

where \eqn{F_1} and \eqn{F_2} are brightness coefficients determined from
lookup tables based on the sky clearness (\eqn{\\epsilon}) and brightness
(\eqn{\\Delta}) parameters, \eqn{A} is the angle of incidence projection,
\eqn{B} is a function of the zenith angle, and \eqn{\\beta} is the tilt angle.

The Perez model uses an 8-bin classification system for sky conditions:
\enumerate{
\item \eqn{1.000 < \\epsilon < 1.065}: Overcast
\item \eqn{1.065 < \\epsilon < 1.230}: Overcast
\item \eqn{1.230 < \\epsilon < 1.500}: Intermediate
\item \eqn{1.500 < \\epsilon < 1.950}: Intermediate
\item \eqn{1.950 < \\epsilon < 2.800}: Intermediate
\item \eqn{2.800 < \\epsilon < 4.500}: Clear
\item \eqn{4.500 < \\epsilon < 6.200}: Clear
\item \eqn{\\epsilon > 6.200}: Very clear
}
}
\examples{
\dontrun{
time <- seq(as.POSIXct("2026-01-15 06:00", tz = "UTC"),
            by = "hour", length.out = 12)
GHI <- c(50, 200, 450, 700, 850, 950, 1000, 950, 850, 700, 450, 200)

# First decompose GHI to get DNI and DHI
decomposed <- erbs_decomposition(time, lat = -30.6279, lon = 24.0054, GHI = GHI)

# Then apply Perez transposition
result <- perez_transposition(
  time = time,
  lat = -30.6279,
  lon = 24.0054,
  GHI = GHI,
  DNI = decomposed$DNI,
  DHI = decomposed$DHI,
  tilt = 20,
  azimuth = 0
)
}

}
\references{
Perez, R., Ineichen, P., Seals, R., Michalsky, J., Stewart, R., 1990.
Modeling daylight availability and irradiance components from direct and
global irradiance. Solar Energy 44 (5), 271-289.
\doi{10.1016/0038-092X(90)90055-G}

Perez, R., Seals, R., Ineichen, P., Stewart, R., Menicucci, D., 1987.
A new simplified version of the Perez diffuse irradiance model for tilted
surfaces. Solar Energy 39(3), 221-232.
\doi{10.1016/0038-092X(87)90015-2}

Loutzenhiser, P. G., et al. (2007). Empirical validation of models to
compute solar irradiance on inclined surfaces for building energy simulation.
Solar Energy, 81, 254-267.
\doi{10.1016/j.solener.2006.03.009}
}
